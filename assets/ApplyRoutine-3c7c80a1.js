import{u as m,r,j as e,T as l,i as f,l as n}from"./index-eeda9e21.js";function j(){const a=m(),[u,d]=r.useState("BUIE-CSE-2");return r.useState(!1),e.jsxs("div",{className:"screen applyRoutine-screen justify-between start-screen p-5 flex select-none flex-col gap-5 min-h-[100dvh]",children:[e.jsxs("h1",{className:"text-dark text-[1.7rem] font-bold text-center mt-[3vh] p-5",children:["Select your college or school ",e.jsx("span",{children:"Routine"})," ",e.jsx("br",{}),e.jsx(l,{emoji:"🏫"})," ",e.jsx(l,{emoji:"📚"})," ",e.jsx(l,{emoji:"🎒"})]}),e.jsx("img",{src:f.undraw_city_girl_ccpd,className:"w-[90%] block mx-auto"}),e.jsxs("div",{className:"w-full flex flex-col gap-2",children:[e.jsx("p",{className:"text-center text-base font-medium text-secondary pb-3",children:"Select Preferred Routine"}),e.jsx("select",{onInput:s=>{d(s.target.value)},defaultValue:"BUIE-CSE-2",id:"routines",name:"routines",className:"tap97 p-3 py-5 appearance-none outline-accent rounded-xl input-bg font-medium text-center text-sm",children:e.jsx("option",{value:"BUIE-CSE-2",children:"BUIE-CSE 2nd Semester"})}),e.jsxs("p",{className:"text-secondary text-xs text-center pt-1",children:["Cannot find your college in the list? To enter routine code manually ",e.jsx("span",{className:"text-accent font-semibold underline",children:"click here"})]})]}),e.jsxs("div",{className:"btnWrapper flex justify-between items-center w-full gap-3",children:[e.jsx("button",{onClick:()=>{n.set("startedUsing","yes"),a("/",{replace:!0})},className:"flex-[1.5] no-highlight select-none rounded-2xl bg-dark text-white  mx-auto block p-[1.3em] duration-150 active:scale-[0.98] text-sm",children:"Skip"}),e.jsx("button",{onClick:()=>x(u),className:"flex-[2.5] no-highlight select-none rounded-2xl bg-accent text-white  mx-auto block p-[1.3em] duration-150 active:scale-[0.98] text-sm",children:"Apply Routine"})]})]});function x(s){if(s==="")return;let i=null,o=null;console.log("Downloading Routine...");const p=fetch(`https://dataabinash.github.io/routine/${s}/info.json`).then(t=>t.json()).then(t=>{o=t}),h=fetch(`https://dataabinash.github.io/routine/${s}/routine.json`).then(t=>t.json()).then(t=>{i=t});Promise.all([p,h]).then(()=>{if(i&&o){console.log(i,o);const t=JSON.parse(n.get("subscriptions")||"{}");if(t[s]){alert("You are already subscribed to this routine.");return}else{t[s]=o,n.set("subscriptions",JSON.stringify(t));let c=JSON.parse(n.get("routines")||"[]");c.push(...i),n.set("routines",JSON.stringify(c)),console.log("Routine Applied Successfully."),n.set("startedUsing","yes"),console.log("Navigate to /"),a("/",{replace:!0})}}else alert("Cannot find routine. Please check your internet connection and try again.")})}}export{j as default};
