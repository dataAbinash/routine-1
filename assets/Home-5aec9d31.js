import{r as d,u as p,l as g,j as i,i as j,F as y,N as T,E as N,T as w}from"./index-023da568.js";const v=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Spe","Oct","Nov","Dec"],b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function D(){const e=new Date;return` ${b[e.getDay()]}, ${e.getDate()}  ${v[e.getMonth()]} `}function o(e){let t=e.getHours(),s=t>=12?"PM":"AM";const n=e.getMinutes();return t>12&&(t=t-12),`${f(t)}:${f(n)} ${s}`}function f(e){return e<10?"0"+e:e}function R(e){const t=new Date;if(e.forEach((s,n)=>{if(t>s.endTime)s.status="done";else if(s.startTime<t&&t<s.endTime){s.status="active";const a=s.endTime.getTime()-s.startTime.getTime(),r=t.getTime()-s.startTime.getTime(),m=Math.floor(r*100/a);s.percentage=m}}),e.length>0&&e[0].status=="done"){e.push({name:"Completed Today",type:"notification"});const s=[];for(let n=0;n<e.length;n++)e[n].status==="done"&&s.push(e[n]);e.splice(0,s.length),e.push(...s)}}function M(e,t){const s=[];for(const n in t){const a=t[n];switch(a.type){case"once":C(a,e)&&s.push(a);break;case"daily":A(a,e)&&s.push(a);break;case"weekly":k(a,e)&&s.push(a);break;case"monthly":S(a,e)&&s.push(a);break;case"yearly":$(a,e)&&s.push(a);break;case"calender":F(a,e)&&s.push(a);break}}return s.sort((n,a)=>n.startTime-a.startTime),s}function F(e,t){let s=new Date(e.time),n=t.getFullYear(),a=s.getFullYear(),r=t.getMonth(),m=s.getMonth(),u=t.getDate(),h=s.getDate();return n===a&&r===m&&u===h?(e.time=s,!0):!1}function S(e,t){const s=t.getDate();if(s in e.time){const n=l(e.time[s][0]);let a=l(e.time[s][1]);return n&&(e.startTime=c(t,n)),a&&(e.endTime=c(t,a)),!0}return!1}function $(e,t){const s=t.getDate(),n=t.getMonth()+1;if(e.time.month===n&&e.time.date===s){const a=l(e.time.time[0]);let r=l(e.time.time[1]);return a&&(e.startTime=c(t,a)),r&&(e.endTime=c(t,r)),!0}return!1}function k(e,t){const s=t.getDay();if(s in e.time){const n=l(e.time[s][0]);let a=l(e.time[s][1]);return n&&(e.startTime=c(t,n)),a&&(e.endTime=c(t,a)),!0}return!1}function A(e,t){const s=l(e.time[0]);let n=l(e.time[1]);return s&&(e.startTime=c(t,s)),n&&(e.endTime=c(t,n)),!0}function C(e,t){const s=new Date(e.time[0]);return H(s,t)?(e.startTime=s,e.time[1]&&(e.endTime=new Date(e.time[1])),!0):!1}function l(e){if(!e)return null;const t=e.split(":");return{hour:+t[0],minute:+t[1]}}function c(e,t){const s=new Date(e);return s.setHours((t==null?void 0:t.hour)||0),s.setMinutes((t==null?void 0:t.minute)||0),s.setSeconds(0),s.setMilliseconds(0),s}function H(e,t){return e.getDate()===t.getDate()}console.log("Hey");function x(){return i.jsx("div",{className:"left opacity-0 select-none",children:i.jsx("div",{className:"emoji bg-main flex-center rounded-xl px-2 py-0 flex-1 ",children:i.jsx("img",{src:"",className:"w-[26px] h-0"})})})}function q(){const[e,t]=d.useState([]),s=p();return d.useEffect(()=>{const n=JSON.parse(g.get("routines")||"[]"),a=M(new Date,n);R(a),t(a)},[]),i.jsxs("div",{className:"home-screen screen-navbar select-none",children:[i.jsxs("header",{className:"px-5 py-3 fixed top-0 bg-main max-h-[120px] overflow-hidden w-full z-20",children:[i.jsxs("div",{className:"heading flex flex-row justify-between items-center gap-2 pb-1",children:[i.jsx("p",{className:"text-xl font-bold ",children:D()}),i.jsxs("div",{className:"notification tap",onClick:()=>s("/notifications",{replace:!0}),children:[i.jsx("div",{className:"dot absolute h-2 w-2 bg-accent mt-2 ml-7 rounded-full"}),i.jsx("img",{src:j.notification,className:"w-10 p-3 rounded-md opacity-80"})]})]}),i.jsx("input",{type:"search",placeholder:"Search Routine",className:"search-full"})]}),i.jsx("section",{className:"p-[1.2rem] pt-[125px] pb-[100px]",children:i.jsx("div",{className:"routines flex flex-col gap-3",children:B(e)})}),i.jsx(y,{}),i.jsx(T,{active:0})]})}function B(e){return console.log(e),e.map((t,s)=>{if(t.type==="notification")return i.jsx("p",{className:"text-[#777]/50 text-center my-5 text-sm font-semibold",children:t.name},s);const n=t.status==="active",a=t.status==="done";return i.jsxs("div",{className:`routine flex flex-col p-[1.2rem] rounded-[1.6rem] ${n?"bg-accent shadow-accent/40 shadow-lg":"input-bg"}
				tap99 ${a?"opacity-60":""}`,children:[i.jsxs("div",{className:"top flex flex-row gap-3",children:[i.jsx("div",{className:"left",children:i.jsx("div",{className:"emoji bg-main aspect-square flex-center rounded-xl p-2 flex-1",children:i.jsx("img",{src:N.get(t.emoji||"‚è∞"),className:"w-[26px] aspect-square"})})}),i.jsxs("div",{className:"right flex-1 flex flex-row justify-between flex-center gap-3",children:[i.jsx("div",{className:"name",children:i.jsx("p",{className:`font-semibold text-base ${n?"text-white":""}`,children:t.name})}),i.jsx("div",{className:"time",children:i.jsx("p",{className:`text-[0.6rem]  font-medium ${n?"text-white/80":"text-secondary"} text-right`,children:J(t)})})]})]}),t.description&&i.jsxs("div",{className:"bottom flex flex-row gap-3",children:[i.jsx(x,{}),i.jsx("div",{className:"right flex-1 flex flex-row justify-between flex-center",children:i.jsx("div",{className:`description font-medium text-[0.75rem] ${n?"text-white/80":"text-secondary"}`,children:i.jsx("p",{children:t.description})})})]}),n&&i.jsxs("div",{className:"bottom flex flex-row gap-3",children:[i.jsx(x,{}),i.jsx("div",{className:"right w-full flex-1 mt-2",children:i.jsxs("div",{className:"sliderContainer flex-row flex gap-3 justify-center items-center",children:[i.jsx("div",{className:"slider w-full h-1 bg-[#ffffff55] rounded-xl",children:i.jsx("div",{className:"slide bg-white w-[50%] h-1 rounded-xl",style:{width:`${t.percentage}%`}})}),i.jsx("div",{className:"percentage",children:i.jsxs("p",{className:"text-xs font-medium text-white/80",children:[t.percentage,"%"]})})]})})]})]},s)})}function J(e){return e.type==="calender"?i.jsxs(i.Fragment,{children:["Event ",i.jsx("br",{})," ",i.jsx(w,{emoji:"üîî"})]}):e.endTime?i.jsxs(i.Fragment,{children:[o(e.startTime)," ",i.jsx("br",{})," ",o(e.endTime)]}):i.jsx(i.Fragment,{children:o(e.startTime)})}export{q as default};
